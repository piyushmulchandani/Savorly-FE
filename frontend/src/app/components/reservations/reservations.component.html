<div class="reservations-container">
	<h2>
		{{ isRestaurant ? 'Restaurant Reservations' : 'My Reservations' }}
	</h2>

	<!-- Restaurant View -->
	<div *ngIf="isRestaurant" class="filters">
		<mat-form-field appearance="outline">
			<mat-label>Date</mat-label>
			<input matInput [matDatepicker]="picker" (dateChange)="onDateChange($event)" />
			<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
			<mat-datepicker #picker></mat-datepicker>
		</mat-form-field>

		<mat-form-field appearance="outline">
			<mat-label>Username</mat-label>
			<input matInput [(ngModel)]="usernameFilter" (input)="loadReservations()" name="usernameFilter" />
		</mat-form-field>

		<button mat-raised-button (click)="resetFilters()" class="wide-btn"><mat-icon>clear</mat-icon> Reset</button>
	</div>

	<!-- Reservations Table -->
	<mat-card>
		<table mat-table [dataSource]="reservations">
			<ng-container matColumnDef="time">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>Time</th>
				<td mat-cell *matCellDef="let res" style="text-align: center">{{ res.reservationTime | date : 'short' }}</td>
			</ng-container>

			<ng-container matColumnDef="people">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>People</th>
				<td mat-cell *matCellDef="let res" style="text-align: center">{{ res.numPeople }}</td>
			</ng-container>

			<ng-container *ngIf="isRestaurant" matColumnDef="user">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>User</th>
				<td mat-cell *matCellDef="let res" style="text-align: center">{{ res.username }}</td>
			</ng-container>

			<ng-container *ngIf="!isRestaurant" matColumnDef="restaurant">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>Restaurant</th>
				<td mat-cell *matCellDef="let res" style="text-align: center">{{ res.restaurantName }}</td>
			</ng-container>

			<ng-container *ngIf="isRestaurant" matColumnDef="table">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>Table</th>
				<td mat-cell *matCellDef="let res" style="text-align: center">{{ res.tableNumber }}</td>
			</ng-container>

			<ng-container *ngIf="!isRestaurant" matColumnDef="actions">
				<th class="custom-header" mat-header-cell *matHeaderCellDef>Actions</th>
				<td mat-cell style="text-align: center" *matCellDef="let res">
					<button mat-icon-button (click)="cancelReservation(res.id)">
						<mat-icon>cancel</mat-icon>
					</button>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
		</table>
	</mat-card>

	<mat-paginator [pageSizeOptions]="[20, 40, 60]"></mat-paginator>
</div>
